[[stack]]
name = "dns-a2cname_1"
tags = ["dns-a2cname", "instance"]
[stack.config]
server = "localhost"
git_account = "b-"
repo = "b-/dns-a2cname-deploy"
reclone = true
file_paths = ["compose.yaml", "ts.yaml"]
environment = """
#TS_AUTHKEY=[[OP__KOMODO__TAILSCALE_OP__CLIENT_SECRET]]?ephemeral=true
TS_AUTHKEY=[[OP__KOMODO__TAILSCALE_OP__CLIENT_SECRET]]
"""

##

[[procedure]]
name = "deploy_dns-a2cname"
tags = ["dns-a2cname", "instance"]

[[procedure.config.stage]]
name = "Sync ðŸ”„"
enabled = true
executions = [
  { execution.type = "RunSync", execution.params.sync = "dns-a2cname_syncs", enabled = true }
]

[[procedure.config.stage]]
name = "Deploy ðŸš€"
enabled = true
executions = [
  { execution.type = "BatchDeployStackIfChanged", execution.params.pattern = "dns-a2cname_*", enabled = true }
]